<!doctype html>
<html lang="en">
<head>
    <%- include('../layouts/header'); %>

    <title>Contact Me</title>
</head>

<body>
<%- include('../layouts/nav'); %>

<main>
    <section class="container py-4 py-md-5">
        <h1 class="display-6 fw-bold" style="color:#2b241e">Contact Us</h1>
        <p class="text-muted">Question, comments, or concerns?</p>

        <div>
            <p><a href="https://www.facebook.com/profile.php?id=61573524971701">
                <img src="https://www.facebook.com/favicon.ico" alt="Facebook" width="20" height="20">
                Follow us on Facebook!
            </a></p>
        </div>
        
        <p>
            Have questions or need assitance? We're here to help! Reach out to us at <a href="mailto:zuber.6@netzero.net">zuber.6@netzero.net</a>, <a href="tel:503-442-9417">(503) 442-9417</a>, or use our contact form below.
        </p>


        <h2>Contact Form</h2>
        <p class="lead my-3">
            <!-- Contact Form-->
            <form id="contactForm">
                <div class="mb-3">
                    <label for="name" class="form-label">Your Name</label>
                    <input type="text" class="form-control" id="name" name="name" required>
                </div>
                <div class="mb-3">
                    <label for="email" class="form-label">Your Email</label>
                    <input type="email" class="form-control" id="email" name="email" required>
                </div>
                <div class="mb-3">
                    <label for="message" class="form-label">Your Message</label>
                    <textarea class="form-control" id="message" name="message" rows="10" required></textarea>
                </div>
                <button type="submit" class="btn btn-primary">Send</button>
            </form>
            <div id="responseMessage" class="mt-3"></div>
            
        </p>
    </section>

    <section class="container py-4 py-md-5 text-center">
        <div class="container py-4 py-md-5">
        <img src="/assets/logo-svg.svg" alt="logo" height="300">
    </div>
    </section>
    
</main>

<%- include('../layouts/footer'); %>

<!-- Bundled JS: Bootstrap, jQuery, Lodash -->
<script src="/scripts/bundle.js"></script>

<!-- Page Initialization Utilities -->
<script src="/scripts/util.js">
    // shortPageFooter() - Fix the footer to the bottom for short pages
</script>

<!-- JavaScript to handle form submission -->
<script>
document.getElementById("contactForm").addEventListener("submit", async function(event) {
    event.preventDefault();

    const formData = new FormData(this);
    const formObject = Object.fromEntries(formData.entries());

    try {
        const response = await fetch("/send-email", {
            method: "POST",
            headers: { "Content-Type": "application/json" }, 
            body: JSON.stringify(formObject)
        });

        if (!response.ok) {
            const errorText = await response.text();
            throw new Error(`Server error: ${errorText}`);
        }

        const result = await response.json();
        alert(result.message);
    } catch (error) {
        console.error("Fetch error:", error);
        alert("An error occurred. Check the console for details.");
    }
});

</script>

</body>
</html>